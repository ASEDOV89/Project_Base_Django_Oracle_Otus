{% extends 'base.html' %}
{% block content %}
<h4>Анализ заказов по историческим данным</h4>

<form method="get" action="{% url 'generate_report' %}">
    {% csrf_token %}
    <label for="store">Магазин: </label>
        <input type="text" name="store" size="4" id="store" value="{{ request.GET.store }}">
    <label for="item">Товар: </label>
        <input type="text" name="item" size="10" id="item" value="{{ request.GET.item }}">
    <label for="date_from">Дата с: </label>
        <input type="date" name="date_from" id="date_from" value="{{ request.GET.date_from }}">
    <label for="date_to">Дата по: </label>
        <input type="date" name="date_to" id="date_to" value="{{ request.GET.date_to }}"><br>
    <button type="submit">Сформировать отчёт</button> <button type="submit" formaction="{% url 'generate_report' %}" formmethod="post">Выгрузить в CSV</button>
</form>
<br>

{{ report|safe }}

<style>
    table {
        width: 100%;
        border-collapse: collapse;
    }
    th, td {
        border: 1px solid #ddd;
        padding: 1px;
        text-align: center;
    }
    th {
        background-color: #f2f2f2;
    }
    tr:hover {
        background-color: #f5f5f5;
    }
    table tbody td {
        font-size: 11px;
    }
    table thead th {
        font-size: 13px;
    }
</style>


{% endblock %}
